!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.blockjsShare=t()}(this,function(){"use strict";function e(e){var t=document.createElement("a");return t.href=e,t.href}function t(e,t){var i=new RegExp("(?|&)"+key+"=($|&)","g");return path.replace(i,"$1")}function i(e,t,i){return e+(location.href.match("?")?"&":"?")+t+"="+i}function n(e,t,n,a,r){return i(e,t,n.replace("FROM",a).replace("TO",r))}function a(e){m=e,x||(x=!0,r())}function r(){"undefined"!=typeof top.window.WeixinJSBridge&&top.window.WeixinJSBridge.invoke?o():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",o,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",o),document.attachEvent("onWeixinJSBridgeReady",o))}function o(){var e=WeixinJSBridge,t=function(t){e.log(t.err_msg)};e.on(_+"qq",function(){e.invoke("shareQQ",{title:m.title,desc:m.desc,img_url:m.imageUrl,link:n(m.url,m.adtagName,m.adtagVal,p,f)},t)}),e.on(_+"QZone",function(){e.invoke("shareQZone",{title:m.title,desc:m.desc,img_url:m.imageUrl,link:n(m.url,m.adtagName,m.adtagVal,p,h)},t)}),e.on(_+"timeline",function(i){e.invoke("shareTimeline",{img_width:k,img_height:k,title:m.wxTitle||m.title,desc:m.desc,img_url:m.imageUrl,link:n(m.url,m.adtagName,m.adtagVal,p,v)},t)}),e.on(_+"appmessage",function(i){e.invoke("sendAppMessage",{img_url:m.imageUrl,img_width:k,img_height:k,link:n(m.url,m.adtagName,m.adtagVal,p,p),title:m.title,desc:m.desc},t)})}function d(e){s=e,setTimeout(function(){mqq.ui.setOnShareHandler(function(e){N(e)})},200)}function l(e){if(g=e,window.QZAppExternal){var t=g.adtagName,i=g.adtagVal,a=g.url,r=g.imgUrl,o=g.title,d=g.desc,l=g.wxTitle;window.QZAppExternal.setShare(function(e){},{type:"share",image:[r,r,r,r,r],title:[o,o,o,o,l||o],summary:[d,d,d,d,d],shareURL:[n(a,t,i,h,w),n(a,t,i,h,h),n(a,t,i,h,f),n(a,t,i,h,p),n(a,t,i,h,v)]})}}function u(e){e=c(e),a(e),d(e),l(e)}function c(i){var n=i.url,a=i.title,r=i.desc,o=i.wxTitle,d=i.imgUrl,l=i.puin,u=i.sourceName,c=i.adtagName,m=i.adtagVal,s=c||"adtag";return{title:a||document.title,desc:r,url:t(e(n||location.href),s),imgUrl:e(d),wxTitle:o||void 0,puin:l||void 0,sourceName:u||void 0,adtagName:s,adtagVal:m||"FROM_to_TO"}}var m,s,g,f="qq",h="qzone",p="wx",v="timeline",w="other",x=!1,k=120,_="menu:share:",N=function(e){var t=s.url,i=s.adtagName,a=s.adtagVal,r=s.title,o=s.wxTitle,d=s.desc;s.imgUrl;switch(e){case 0:n(t,i,a,f,f);break;case 1:n(t,i,a,f,h);break;case 2:n(t,i,a,f,p);break;case 3:n(t,i,a,f,v)}var l=3==e?o||r:r,u={title:l,desc:d,share_type:e,back:!0,image_url:s.imgUrl,share_url:shareUrl};void 0!==s.puin&&(u.puin=s.puin),void 0!==s.sourceName&&(u.sourceName=s.sourceName),mqq.ui.shareMessage(u,function(e){})};return u});