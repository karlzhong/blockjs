!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.blockjsShare=e.blockjsShare||{})}(this,function(e){"use strict";function t(e){var t=document.createElement("a");return t.href=e,t.href}function i(e,t){var i=new RegExp("(?|&)"+key+"=($|&)","g");return path.replace(i,"$1")}function a(e,t,i){return e+(location.href.match("?")?"&":"?")+t+"="+i}function n(e,t,i,n,r){return a(e,t,i.replace("FROM",n).replace("TO",r))}function r(e){m=e,k||(k=!0,o())}function o(){"undefined"!=typeof top.window.WeixinJSBridge&&top.window.WeixinJSBridge.invoke?l():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",l,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",l),document.attachEvent("onWeixinJSBridgeReady",l))}function l(){var e=WeixinJSBridge,t=function(t){e.log(t.err_msg)};e.on("menu:share:qq",function(){e.invoke("shareQQ",{title:m.title,desc:m.desc,img_url:m.imageUrl,link:n(m.url,m.adtagName,m.adtagVal,v,h)},t)}),e.on("menu:share:QZone",function(){e.invoke("shareQZone",{title:m.title,desc:m.desc,img_url:m.imageUrl,link:n(m.url,m.adtagName,m.adtagVal,v,p)},t)}),e.on("menu:share:timeline",function(i){e.invoke("shareTimeline",{img_width:_,img_height:_,title:m.wxTitle||m.title,desc:m.desc,img_url:m.imageUrl,link:n(m.url,m.adtagName,m.adtagVal,v,w)},t)}),e.on("menu:share:appmessage",function(i){e.invoke("sendAppMessage",{img_url:m.imageUrl,img_width:_,img_height:_,link:n(m.url,m.adtagName,m.adtagVal,v,v),title:m.title,desc:m.desc},t)})}function d(e){g=e,setTimeout(function(){mqq.ui.setOnShareHandler(function(e){N(e)})},200)}function u(e){if(f=e,window.QZAppExternal){var t=f.adtagName,i=f.adtagVal,a=f.url,r=f.imgUrl,o=f.title,l=f.desc,d=f.wxTitle;window.QZAppExternal.setShare(function(e){},{type:"share",image:[r,r,r,r,r],title:[o,o,o,o,d||o],summary:[l,l,l,l,l],shareURL:[n(a,t,i,p,x),n(a,t,i,p,p),n(a,t,i,p,h),n(a,t,i,p,v),n(a,t,i,p,w)]})}}function c(e){e=s(e),r(e),d(e),u(e)}function s(e){var a=e.url,n=e.title,r=e.desc,o=e.wxTitle,l=e.imgUrl,d=e.puin,u=e.sourceName,c=e.adtagName,s=e.adtagVal,m=c||"adtag";return{title:n||document.title,desc:r,url:i(t(a||location.href),m),imgUrl:t(l),wxTitle:o||void 0,puin:d||void 0,sourceName:u||void 0,adtagName:m,adtagVal:s||"FROM_to_TO"}}var m,g,f,h="qq",p="qzone",v="wx",w="timeline",x="other",k=!1,_=120,N=function(e){var t=g.url,i=g.adtagName,a=g.adtagVal,r=g.title,o=g.wxTitle,l=g.desc;g.imgUrl;switch(e){case 0:n(t,i,a,h,h);break;case 1:n(t,i,a,h,p);break;case 2:n(t,i,a,h,v);break;case 3:n(t,i,a,h,w)}var d=3==e?o||r:r,u={title:d,desc:l,share_type:e,back:!0,image_url:g.imgUrl,share_url:shareUrl};void 0!==g.puin&&(u.puin=g.puin),void 0!==g.sourceName&&(u.sourceName=g.sourceName),mqq.ui.shareMessage(u,function(e){})};e.setBlockJsShare=c,Object.defineProperty(e,"__esModule",{value:!0})});